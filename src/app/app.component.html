<div class="simulation-card" *ngIf="simulationSteps.length > 0">
  <mat-card>
    <mat-card-header class="legend">
      <mat-card-title>Simulation de Feu de Forêt - Étape {{ currentStep + 1 }}</mat-card-title>
    </mat-card-header>

    <!-- Legend for the colors -->
    <div class="legend">
      <div class="legend-item">
        <div class="color-box empty"></div>
        <span>Vide (EMPTY)</span>
      </div>
      <div class="legend-item">
        <div class="color-box fire"></div>
        <span>Feu (FIRE)</span>
      </div>
      <div class="legend-item">
        <div class="color-box ash"></div>
        <span>Cendres (ASH)</span>
      </div>
    </div>

    <!-- Forest grid display -->
    <div class="forest">
      <div *ngFor="let row of simulationSteps[currentStep].grid; let rowIndex = index" class="row">
        <div *ngFor="let cell of row; let colIndex = index" class="cell"
             [ngClass]="{
               empty: cell === 'EMPTY',
               fire: cell === 'FIRE',
               ash: cell === 'ASH'
             }">
        </div>
      </div>
    </div>

    <!-- Controls for navigation and auto-run -->
    <mat-card-actions class="legend">
      <button mat-button (click)="previousStep()" [disabled]="isFirstStep">Précédent</button>
      <button mat-button (click)="nextStep()" [disabled]="isLastStep">Suivant</button>
      <button mat-button (click)="toggleAutoRun()">
        {{ autoRunning ? 'Stop Auto Run' : 'Start Auto Run' }}
      </button>
      <button mat-button (click)="loadSimulation()">Nouvelle Simulation</button>
    </mat-card-actions>
  </mat-card>
</div>
